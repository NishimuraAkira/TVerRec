# ToDo

## 便利機能

- [x] TVer.jp の検索機能を使ってキーワード指定できるようにする
- [x] 削除対象の番組を部分一致で指定できるようにする
  - [x] 部分一致したものはダウンロードしない
  - [x] ダウンロードされてしまったものでも部分一致で削除する
- [x] プログレスバーの実装
- [ ] メタデータを追加で指定する(タイトルにシリーズ番号、日付、発行者、著作権、トラック番号、エンコーダなど)
- [x] ffmpeg のエラーログの古いものを削除
- [x] タレント名で検索してタレント ID を特定し、そこから動画ダウンロード
- [x] 番組名で検索してそこから番組 ID を特定し、そこから動画ダウンロード
- [ ] 番組ダウンロード時にジャンル ID の情報を取得し、メタデータとして動画に埋め込む
- [ ] 廃止になったジャンル ID を自動的に削除
- [ ] 追加になったジャンル ID を自動的に追加
- [x] バージョンアップ通知機能を追加
- [x] ダウンロード先に放送局ごとにフォルダ分けした上で番組フォルダを作るオプションをつける
  - [ ] 放送局ごとに保存した動画の最終保存先への移動をサポートする
- [x] ダウンロード後のチェック処理もスキップするオプションをつける
- [x] 動画検証に速度重視のモードを追加
- [x] トースト通知機能を追加
  - [x] Windows 向け
  - [ ] mac 向け
  - [ ] Linux 向け
- [ ] バージョンアップ時にリストファイルがクリアされないようにする
- [ ] バージョンアップ時に設定ファイルがクリアされないようにする

## youtube-dl 制御機能

- [x] youtube-dl のパラメータ指定を変更して、メタデータを動画に含めるようにする。その際、中間ファイルが増える可能性があるので削除対象に含めるか検討する
- [x] youtube-dl でダウンロードする際に、中間ファイルの出力先を保存先と分ける
- [x] youtube-dl の動画処理について、パフォーマンスチューニングを検討する

## 性能改善・安定性向上

- [x] ハードウェアアクセラレーションの活用。自動判定は難しいので、設定で変更できるようにした。
- [x] リストファイルの排他制御を行い、複数 PC から同時実行できるようにする
- [ ] 排他制御の観点でメリットがあれば、SQLite などの導入を検討する。ただし、外部ライブラリが必要になる場合は慎重に検討する
- [x] 変数のスコープを明確にする
- [x] 変数名を実態に合わせる
- [ ] 関数の引数チェックを厳密にする
- [ ] 関数の汎用化・正規化を行う
- [ ] 動画の情報を引き回すためにカスタムオブジェクトを作成する
- [ ] スクロールバーの残骸をきれいにする → どうやら無理っぽい?
- [x] 各種コードチェックに引っかからないように修正
- [x] トークンの取得頻度を下げる

## 対象環境の拡充

- [x] Linux での動作確認をする。ひとまず Pi4 では動いた。
- [x] Mac でも動作確認をする。ひとまず M1 Mac Mini では動いた。

## 対象動画サイトの拡充

- [ ] GYAO!のサポートを検討。
